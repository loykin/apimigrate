# Sample migration: simple GET request to a public test site
# This demonstrates the minimal structure of a migration file.

up:
  name: sample-get-example
  # Local env variables (optional); merged over globals from config
  env: { }
  request:
    method: GET
    url: https://example.com
    headers:
      - name: User-Agent
        value: apimigrate-sample
      - name: Authorization
        value: "Bearer {{.auth.sample}}"
    # Optional body; use render_body: false to send literal braces like {{ abc }} without substitution
    # body: '{"raw":"{{ abc }}"}'
    # render_body: false
  response:
    # Accept HTTP 200 as success
    result_code: [ "200" ]
    # Control behavior when variables in env_from are missing from response JSON:
    #   - skip (default): ignore missing variables and continue
    #   - fail: treat missing variables as an error (migration run will be recorded as failed)
    # env_missing: skip
    # You can extract values from JSON bodies using EnvFrom, e.g.:
    # env_from:
    #   example: path.to.value

# down:  # Optional rollback step
#   name: sample-down
#   method: DELETE
#   url: https://example.com/resource/{{.id}}
#   # Only include a down section if you have a reversible action.
